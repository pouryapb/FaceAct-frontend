(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{99:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a(0),r=a.n(o),c=a(12),i=a.n(c),s=a(33),l=a(14),u=a(155),j=a(73),d=a(7),h=a(131),m=a(48),b=a(134),f=a(135),O=a(161),p=a(137),x=a(162),g=a(156),v=a(138),w=a(139),y=a(157),S=a(56),C=a.n(S),N=a(159),k=r.a.createContext(null),T=function(e){var t=e.children,a=Object(o.useState)(null),r=Object(d.a)(a,2),c=r[0],i=r[1],s=Object(o.useState)(null),l=Object(d.a)(s,2),u=l[0],j=l[1],h=Object(o.useState)("https://murmuring-coast-29701.herokuapp.com/"),m=Object(d.a)(h,1)[0],b=window.localStorage.getItem("token"),f=window.localStorage.getItem("userId");b&&!c&&(i(b),j(f));return Object(n.jsx)(k.Provider,{value:{token:c,userId:u,ip:m,login:function(e,t){i(e),j(t),window.localStorage.setItem("token",e),window.localStorage.setItem("userId",t)},logout:function(){i(null),j(null),window.localStorage.clear()}},children:t})},E=Object(h.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),I=function(){return Object(n.jsxs)(m.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(n.jsx)(b.a,{component:s.b,color:"inherit",to:"/",children:"FaceAct"})," ",(new Date).getFullYear(),"."]})},B=function(){var e=E(),t=Object(o.useState)(""),a=Object(d.a)(t,2),r=a[0],c=a[1],i=Object(o.useState)(""),l=Object(d.a)(i,2),u=l[0],j=l[1],h=Object(o.useState)(!1),S=Object(d.a)(h,2),T=S[0],B=S[1],P=Object(o.useState)(""),W=Object(d.a)(P,2),A=W[0],F=W[1],q=Object(o.useState)(""),D=Object(d.a)(q,2),z=D[0],L=D[1],U=Object(o.useContext)(k),R=U.login,G=U.ip,H=function(){B(!1)};return Object(n.jsxs)(f.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(O.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:T,autoHideDuration:3e3,onClose:H,children:Object(n.jsx)(N.a,{elevation:6,variant:"filled",onClose:H,severity:A,children:z})}),Object(n.jsx)(p.a,{}),Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)(x.a,{className:e.avatar,children:Object(n.jsx)(C.a,{})}),Object(n.jsx)(m.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(n.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:function(e){if(e.preventDefault(),""===r||""===u)return F("warning"),L("Please fill the required fields."),void B(!0);var t={username:r,password:u};fetch(G+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(200!==e.status&&201!==e.status)throw F("error"),L("Auth failed!"),B(!0),new Error("failed!");return e.json()})).then((function(e){F("success"),L("User successfuly created."),B(!0),R(e.token,r)})).catch((function(e){F("error"),L("Auth failed!"),B(!0),console.log(e)}))},children:[Object(n.jsx)(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"useename",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:r,onChange:function(e){c(e.target.value)}}),Object(n.jsx)(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:u,onChange:function(e){j(e.target.value)}}),Object(n.jsx)(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign In"}),Object(n.jsxs)(w.a,{container:!0,children:[Object(n.jsx)(w.a,{item:!0,xs:!0,children:Object(n.jsx)(b.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(n.jsx)(w.a,{item:!0,children:Object(n.jsx)(b.a,{component:s.b,to:"/signup",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]}),Object(n.jsx)(y.a,{mt:8,children:Object(n.jsx)(I,{})})]})},P=Object(h.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),W=function(){return Object(n.jsxs)(m.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(n.jsx)(b.a,{component:s.b,color:"inherit",to:"/",children:"FaceAct"})," ",(new Date).getFullYear(),"."]})},A=function(){var e=P(),t=Object(o.useContext)(k).ip,a=Object(o.useState)(""),r=Object(d.a)(a,2),c=r[0],i=r[1],l=Object(o.useState)(""),u=Object(d.a)(l,2),j=u[0],h=u[1],S=Object(o.useState)(""),T=Object(d.a)(S,2),E=T[0],I=T[1],B=Object(o.useState)(""),A=Object(d.a)(B,2),F=A[0],q=A[1],D=Object(o.useState)(""),z=Object(d.a)(D,2),L=z[0],U=z[1],R=Object(o.useState)(!1),G=Object(d.a)(R,2),H=G[0],J=G[1],_=Object(o.useState)(""),M=Object(d.a)(_,2),V=M[0],Y=M[1],K=Object(o.useState)(""),Q=Object(d.a)(K,2),X=Q[0],Z=Q[1],$=function(){J(!1)};return Object(n.jsxs)(f.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(O.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:H,autoHideDuration:3e3,onClose:$,children:Object(n.jsx)(N.a,{elevation:6,variant:"filled",onClose:$,severity:V,children:X})}),Object(n.jsx)(p.a,{}),Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)(x.a,{className:e.avatar,children:Object(n.jsx)(C.a,{})}),Object(n.jsx)(m.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(n.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:function(e){if(e.preventDefault(),""===c||""===j||""===E||""===F||""===L)return Y("warning"),Z("Please fill the required fields."),void J(!0);var a={username:E,firstName:c,lastName:j,email:F,password:L};fetch(t+"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){if(200!==e.status&&201!==e.status)throw Y("error"),Z("Sign up failed! User exists."),J(!0),new Error("failed!");return e.json()})).then((function(e){Y("success"),Z("User successfuly created."),J(!0)})).catch((function(e){Y("error"),Z("Sign up failed! User exists."),J(!0),console.log(e)}))},children:[Object(n.jsxs)(w.a,{container:!0,spacing:2,children:[Object(n.jsx)(w.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(g.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,value:c,onChange:function(e){i(e.target.value)}})}),Object(n.jsx)(w.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(g.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",value:j,onChange:function(e){h(e.target.value)}})}),Object(n.jsx)(w.a,{item:!0,xs:12,children:Object(n.jsx)(g.a,{variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",value:E,onChange:function(e){I(e.target.value)}})}),Object(n.jsx)(w.a,{item:!0,xs:12,children:Object(n.jsx)(g.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:F,onChange:function(e){q(e.target.value)}})}),Object(n.jsx)(w.a,{item:!0,xs:12,children:Object(n.jsx)(g.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:L,onChange:function(e){U(e.target.value)}})})]}),Object(n.jsx)(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign Up"}),Object(n.jsx)(w.a,{container:!0,justify:"flex-end",children:Object(n.jsx)(w.a,{item:!0,children:Object(n.jsx)(b.a,{component:s.b,to:"/signin",variant:"body2",children:"Already have an account? Sign in"})})})]})]}),Object(n.jsx)(y.a,{mt:5,children:Object(n.jsx)(W,{})})]})},F=a(101),q=a(158),D=a(150),z=a(151),L=a(152),U=a(153),R=a(154),G=a(140),H=a(141),J=a(136),_=a(74),M=a(163),V=a(143),Y=a(144),K=a(145),Q=a(146),X=a(142),Z=a(147),$=a(57),ee=Object(h.a)((function(){return{root:{marginBottom:"25px"},avatar:{backgroundColor:$.a[500]}}})),te=function(e){var t=e.id,a=e.username,c=e.avatarImage,i=e.authorName,s=e.postDate,l=e.media,u=e.mediaType,j=e.caption,h=e.liked,b=e.likeCount,f=e.updater,O=ee(),p=Object(o.useContext)(k),g=p.token,v=p.userId,w=p.ip,y=Object(o.useState)(h),S=Object(d.a)(y,2),C=S[0],N=S[1],T=Object(o.useState)(null),E=Object(d.a)(T,2),I=E[0],B=E[1],P=Object(o.useState)(b),W=Object(d.a)(P,2),A=W[0],F=W[1],q=function(){B(null)};return Object(n.jsxs)(G.a,{className:O.root,children:[Object(n.jsx)(H.a,{avatar:Object(n.jsx)(x.a,{alt:i,src:c,className:O.avatar,children:i[0]}),action:a===v&&Object(n.jsxs)(r.a.Fragment,{children:[Object(n.jsx)(J.a,{"aria-label":"settings","aria-controls":"more-menu","aria-haspopup":"true",onClick:function(e){B(e.currentTarget)},children:Object(n.jsx)(X.a,{})}),Object(n.jsx)(_.a,{id:"more-menu",anchorEl:I,keepMounted:!0,open:Boolean(I),onClose:q,PaperProps:{style:{width:"20ch"}},children:Object(n.jsx)(M.a,{selected:!1,onClick:function(e){fetch(w+"/posts/delete/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+g}}).then((function(){q(),f()})).catch((function(e){console.log(e)}))},children:"delete"},"delete")})]}),title:i,subheader:new Date(s).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short",hourCycle:"h23"})}),Object(n.jsx)(V.a,{}),u&&Object(n.jsx)(Y.a,{component:u,controls:!0,src:l}),Object(n.jsx)(K.a,{children:Object(n.jsx)(m.a,{variant:"body2",component:"p",children:j})}),Object(n.jsx)(Q.a,{disableSpacing:!0,children:Object(n.jsxs)(J.a,{onClick:function(){C?fetch(w+"/posts/dislike/"+t,{method:"GET",headers:{Authorization:"Bearer "+g}}).then((function(){N(!1),F(A-1)})).catch((function(e){console.log(e)})):fetch(w+"/posts/like/"+t,{method:"GET",headers:{Authorization:"Bearer "+g}}).then((function(){N(!0),F(A+1)})).catch((function(e){console.log(e)}))},"aria-label":"Like",children:[Object(n.jsx)(Z.a,{style:{color:C&&$.a[600]}}),A]})})]})},ae=a(148),ne=a(149),oe=Object(h.a)((function(){return{root:{marginBottom:"25px"},textfield:{width:"90%",marginLeft:"5%"},input:{display:"none"},media:{marginBottom:"10px"}}})),re=function(e){var t=e.updater,a=oe(),r=Object(o.useContext)(k),c=r.token,i=r.userId,s=r.ip,l=Object(o.useState)(""),u=Object(d.a)(l,2),j=u[0],h=u[1],m=Object(o.useState)(!1),b=Object(d.a)(m,2),f=b[0],O=b[1],p=Object(o.useState)(null),x=Object(d.a)(p,2),y=x[0],S=x[1],C=Object(o.useState)(null),N=Object(d.a)(C,2),T=N[0],E=N[1],I=new FileReader;return Object(n.jsxs)(G.a,{className:a.root,children:[Object(n.jsx)(H.a,{}),y&&Object(n.jsx)(Y.a,{className:a.media,component:"image"===y.type.split("/")[0]?"img":"video",controls:!0,src:T}),Object(n.jsxs)("form",{noValidate:!0,autoComplete:"off",children:[Object(n.jsx)(g.a,{className:a.textfield,id:"post-text",color:"secondary",placeholder:"What's happening?",multiline:!0,onChange:function(e){""!==e.target.value||y?O(!0):O(!1),h(e.target.value)},value:j}),Object(n.jsx)(Q.a,{justify:"flex-end",disableSpacing:!0,children:Object(n.jsx)(w.a,{container:!0,justify:"flex-end",children:Object(n.jsxs)(w.a,{item:!0,children:[Object(n.jsx)("input",{className:a.input,accept:"image/*,video/*",id:"upload-btn",type:"file",onChange:function(e){var t=e.target.files[0];t&&(S(t),O(!0),I.onload=function(e){E(e.target.result)},I.readAsDataURL(t))}}),Object(n.jsx)("label",{htmlFor:"upload-btn",children:Object(n.jsx)(J.a,{component:"span",children:Object(n.jsx)(ae.a,{})})}),Object(n.jsx)(v.a,{"aria-label":"send-btn",onClick:function(e){e.preventDefault();var a=new FormData;a.append("postmedia",y),a.append("text",j),a.append("username",i),fetch(s+"/posts",{method:"POST",headers:{Authorization:"Bearer "+c},body:a}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error(e.status);return e.json()})).then((function(e){console.log(e),t()})).catch((function(e){console.log(e)})),h(""),S(null),E(null)},disabled:!f,variant:"outlined",endIcon:Object(n.jsx)(ne.a,{}),children:"Post"})]})})})]})]})},ce=function(){var e=Object(o.useContext)(k),t=e.token,a=e.userId,r=e.ip,c=Object(o.useState)([]),i=Object(d.a)(c,2),s=i[0],l=i[1];0===s.length&&fetch(r+"/posts/feed",{method:"GET",headers:{Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("failed!");return e.json()})).then((function(e){0!==e.length&&l(e)})).catch((function(e){console.log(e)}));var u=function(){l([])},j=0!==s.length?s.map((function(e){return Object(n.jsx)(te,{id:e.post._id,username:e.post.username,avatarImage:r+"/"+e.avatar,authorName:e.name,postDate:e.post.date,media:r+"/"+e.post.media,mediaType:"image"===e.post.mediatype?"img":e.post.mediatype,caption:e.post.text,liked:!!e.post.likes.includes(a),likeCount:e.post.likes.length,updater:u},e.post._id)})):Object(n.jsx)(y.a,{marginBottom:"2rem",marginTop:"2rem",children:Object(n.jsx)(m.a,{align:"center",color:"textSecondary",variant:"h4",children:"No posts yet!"})});return Object(n.jsxs)(f.a,{maxWidth:"sm",children:[Object(n.jsx)(re,{updater:u}),j]})},ie=Object(h.a)((function(e){return{avatar:{width:e.spacing(5),height:e.spacing(5),marginRight:"0.5rem"},button:{justifyContent:"left"}}})),se=function(e){var t=e.value,a=e.link,o=e.image,r=ie();return Object(n.jsxs)(v.a,{className:r.button,color:"default",fullWidth:!0,href:a,children:[Object(n.jsx)(x.a,{src:o,className:r.avatar}),t]})},le=function(e){var t=e.name,a=Object(o.useContext)(k),r=a.token,c=a.ip;return Object(n.jsxs)(y.a,{paddingLeft:"1rem",children:[t,Object(n.jsx)(v.a,{onClick:function(){fetch(c+"/reqac/"+t,{method:"POST",headers:{Authorization:"Bearer "+r}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("failed!");return e.json()})).catch((function(e){console.log(e)}))},children:"accept"}),Object(n.jsx)(v.a,{onClick:function(){fetch(c+"/reqden/"+t,{method:"POST",headers:{Authorization:"Bearer "+r}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("failed!");return e.json()})).catch((function(e){console.log(e)}))},children:"deny"})]})},ue=function(){var e=Object(o.useState)(""),t=Object(d.a)(e,2),a=t[0],r=t[1],c=Object(o.useState)([]),i=Object(d.a)(c,2),s=i[0],l=i[1],u=Object(o.useState)([]),j=Object(d.a)(u,2),h=j[0],m=j[1],b=Object(o.useContext)(k),O=b.userId,p=b.ip;setTimeout((function(){fetch(p+"/"+O,{method:"GET"}).then((function(e){if(200!==e.status&&201!==e.status&&304!==e.status)throw new Error("failed!");return e.json()})).then((function(e){var t=e.requests;m(t.map((function(e,t){return Object(n.jsx)(le,{name:e},t)})))})).catch((function(e){console.log(e)}))}),2e3);return Object(n.jsxs)(f.a,{maxWidth:"sm",children:[Object(n.jsx)(g.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"search",label:"Search",name:"search",autoComplete:"search",value:a,onChange:function(e){var t=e.target.value;r(t),""!==t?fetch(p+"/search/"+t,{method:"GET"}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("failed!");return e.json()})).then((function(e){l(e.map((function(e){return Object(n.jsx)(se,{value:e.firstName+" "+e.lastName,link:"http://localhost:3000/"+e.username,image:e.avatar},e._id)})))})).catch((function(e){console.log(e)})):l([])}}),h,Object(n.jsx)(V.a,{}),s]})},je=Object(h.a)((function(e){return{root:{marginBottom:"25px",boxShadow:"none"},avatar:{width:e.spacing(10),height:e.spacing(10)},gridItem:{textAlign:"center",cursor:"pointer"},link:{fontSize:"0.6rem"}}})),de=0;setInterval((function(){de=0}),2e3);var he=function(e){var t=e.match,a=je(),r=Object(o.useContext)(k),c=r.token,i=r.userId,s=r.ip,l=Object(o.useState)(null),u=Object(d.a)(l,2),j=u[0],h=u[1],O=Object(o.useState)(""),p=Object(d.a)(O,2),g=p[0],S=p[1],C=Object(o.useState)([]),N=Object(d.a)(C,2),T=N[0],E=N[1],I=Object(o.useState)([]),B=Object(d.a)(I,2),P=B[0],W=B[1],A=Object(o.useState)([]),F=Object(d.a)(A,2),q=F[0],D=F[1],z=Object(o.useState)([]),L=Object(d.a)(z,2),U=L[0],R=L[1],J=Object(o.useState)("Follow"),Y=Object(d.a)(J,2),Q=Y[0],X=Y[1],Z=Object(o.useState)(null),$=Object(d.a)(Z,2),ee=$[0],ae=$[1],ne=Object(o.useState)(null),oe=Object(d.a)(ne,2),re=oe[0],ce=oe[1],ie=function(){fetch(s+"/"+(t?t.params.username:i),{method:"GET"}).then((function(e){if(200!==e.status&&201!==e.status&&304!==e.status)throw new Error("failed!");return e.json()})).then((function(e){var t=e.followers;W(e.requests),h(e.avatar?s+"/"+e.avatar:null),S(e.firstName+" "+e.lastName),D(t),R(e.followings),P.includes(i)||t.includes(i)?!P.includes(i)&&t.includes(i)?X("Unfollow"):P.includes(i)&&X("Request sent"):X("Follow")})).catch((function(e){console.log(e)})),fetch(s+"/posts/userposts/"+(t?t.params.username:i),{method:"GET",headers:{Authorization:"Bearer "+c}}).then((function(e){if(200!==e.status&&201!==e.status&&304!==e.status)throw new Error("failed!");return e.json()})).then((function(e){E(e)})).catch((function(e){console.log(e)}))};setTimeout((function(){0===de&&(de=1,fetch(s+"/"+(t?t.params.username:i),{method:"GET"}).then((function(e){if(200!==e.status&&201!==e.status&&304!==e.status)throw new Error("failed!");return e.json()})).then((function(e){var t=e.requests,a=e.followers;D(a),R(e.followings),t.includes(i)||a.includes(i)?!t.includes(i)&&a.includes(i)?X("Unfollow"):t.includes(i)&&X("Request sent"):X("Follow")})).catch((function(e){console.log(e)})))}),2e3),""===g&&ie();var se=function(){ie()},le=T.map((function(e){return Object(n.jsx)(te,{id:e._id,username:e.username,avatarImage:j,authorName:g,postDate:e.date,media:s+"/"+e.media,mediaType:"image"===e.mediatype?"img":e.mediatype,caption:e.text,liked:!!e.likes.includes(i),likeCount:e.likes.length,updater:se},e._id)}));return Object(n.jsxs)(f.a,{maxWidth:"sm",children:[Object(n.jsxs)(G.a,{className:a.root,children:[Object(n.jsx)(H.a,{title:t?t.params.username:i,subheader:g}),Object(n.jsxs)(K.a,{children:[Object(n.jsxs)(w.a,{container:!0,alignItems:"center",spacing:2,children:[Object(n.jsx)(w.a,{className:a.gridItem,item:!0,xs:3,children:Object(n.jsx)(y.a,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:Object(n.jsx)(x.a,{src:j,className:a.avatar})})}),Object(n.jsxs)(w.a,{className:a.gridItem,item:!0,xs:3,style:{cursor:"default"},children:[Object(n.jsx)(b.a,{className:a.link,component:"p",color:"textPrimary",variant:"button",underline:"none",children:"Posts"}),Object(n.jsx)(m.a,{variant:"subtitle2",children:T.length})]}),Object(n.jsxs)(w.a,{className:a.gridItem,item:!0,xs:3,"aria-haspopup":"true","aria-controls":"followerList",onClick:function(e){ce(e.currentTarget)},children:[Object(n.jsx)(b.a,{className:a.link,component:"p",color:"textPrimary",variant:"button",underline:"none",children:"Followers"}),Object(n.jsx)(m.a,{variant:"subtitle2",children:q.length})]}),Object(n.jsx)(_.a,{id:"followerList",anchorEl:re,keepMounted:!0,open:Boolean(re),onClose:function(){ce(null)},PaperProps:{style:{minWidth:"20ch"}},children:0!==q.length?q.map((function(e,t){return Object(n.jsx)(M.a,{selected:!1,children:Object(n.jsx)(b.a,{href:"http://localhost:3000/"+e,color:"textPrimary",variant:"button",underline:"none",children:e})},t)})):Object(n.jsx)(M.a,{selected:!1,disabled:!0,children:Object(n.jsx)(b.a,{disabled:!0,href:"#",component:"p",color:"textSecondary",variant:"button",underline:"none",children:"\u266b Lonely, I'm Mr. Lonely~ \u266b"})})}),Object(n.jsxs)(w.a,{className:a.gridItem,item:!0,xs:3,"aria-haspopup":"true","aria-controls":"followingList",onClick:function(e){ae(e.currentTarget)},children:[Object(n.jsx)(b.a,{className:a.link,component:"button",color:"textPrimary",variant:"button",underline:"none",children:"Following"}),Object(n.jsx)(m.a,{variant:"subtitle2",children:U.length})]}),Object(n.jsx)(_.a,{id:"followingList",anchorEl:ee,keepMounted:!0,open:Boolean(ee),onClose:function(){ae(null)},PaperProps:{style:{minWidth:"20ch"}},children:0!==U.length?U.map((function(e,t){return Object(n.jsx)(M.a,{selected:!1,children:Object(n.jsx)(b.a,{href:"http://localhost:3000/"+e,color:"textPrimary",variant:"button",underline:"none",children:e})},t)})):Object(n.jsx)(M.a,{selected:!1,disabled:!0,children:Object(n.jsx)(b.a,{disabled:!0,href:"#",component:"p",color:"textSecondary",variant:"button",underline:"none",children:"\u266b I have nobody for my own~ \u266b"})})})]}),t&&c&&t.params.username!==i&&Object(n.jsx)(v.a,{style:{marginTop:"1rem"},color:"secondary",fullWidth:!0,variant:"outlined",onClick:function(){"Unfollow"===Q?(X("Follow"),function(){var e=t.params.username;fetch(s+"/unfriend/"+e,{method:"POST",headers:{Authorization:"Bearer "+c}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("failed!")})).catch((function(e){console.log(e)}))}()):"Follow"===Q?(X("Request sent"),function(){var e=t.params.username;fetch(s+"/req/"+e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("failed!")})).catch((function(e){console.log(e)}))}()):"Request sent"===Q&&(X("Follow"),function(){var e=t.params.username;fetch(s+"/unreq/"+e,{method:"POST",headers:{Authorization:"Bearer "+c}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("failed!")})).catch((function(e){console.log(e)}))}())},children:Q})]})]}),Object(n.jsx)(V.a,{}),0===le.length?Object(n.jsx)(y.a,{marginTop:"2rem",children:Object(n.jsx)(m.a,{align:"center",color:"textSecondary",variant:"h4",children:"No posts yet!"})}):le]})},me=Object(h.a)((function(e){return{avatar:{width:e.spacing(10),height:e.spacing(10),marginBottom:"0.5rem"},gridItem:{textAlign:"center"},input:{display:"none"}}})),be=function(){var e=me(),t=Object(o.useState)(""),a=Object(d.a)(t,2),r=a[0],c=a[1],i=Object(o.useState)(""),s=Object(d.a)(i,2),l=s[0],u=s[1],j=Object(o.useState)(""),h=Object(d.a)(j,2),m=h[0],b=h[1],p=Object(o.useState)(""),w=Object(d.a)(p,2),S=w[0],C=w[1],T=Object(o.useState)(null),E=Object(d.a)(T,2),I=E[0],B=E[1],P=Object(o.useState)(!1),W=Object(d.a)(P,2),A=W[0],F=W[1],q=Object(o.useState)(""),D=Object(d.a)(q,2),z=D[0],L=D[1],U=Object(o.useState)(""),R=Object(d.a)(U,2),J=R[0],_=R[1],M=Object(o.useContext)(k),V=M.token,Y=M.userId,Q=M.logout,X=M.ip;""===S&&fetch(X+"/uinfo/"+Y,{method:"GET",headers:{Authorization:"Bearer "+V}}).then((function(e){if(200!==e.status&&201!==e.status&&304!==e.status)throw new Error("failed!");return e.json()})).then((function(e){c(X+"/"+e.avatar),u(e.firstName),b(e.lastName),C(e.email)})).catch((function(e){console.log(e)}));var Z=new FileReader,$=function(){F(!1)};return Object(n.jsxs)(f.a,{maxWidth:"sm",style:{paddingBottom:"0.1rem",marginBottom:"1.5rem"},children:[Object(n.jsx)(O.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:A,autoHideDuration:3e3,onClose:$,children:Object(n.jsx)(N.a,{elevation:6,variant:"filled",onClose:$,severity:z,children:J})}),Object(n.jsxs)(G.a,{elevation:3,children:[Object(n.jsx)(H.a,{}),Object(n.jsxs)("form",{id:"av-up",noValidate:!0,autoComplete:"off",children:[Object(n.jsxs)(K.a,{children:[Object(n.jsxs)(y.a,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[Object(n.jsx)(x.a,{src:r,className:e.avatar}),Object(n.jsx)("input",{className:e.input,accept:"image/*",id:"upload-btn",type:"file",onChange:function(e){var t=e.target.files[0];t&&(B(t),Z.onload=function(e){c(e.target.result)},Z.readAsDataURL(t))}}),Object(n.jsx)("label",{htmlFor:"upload-btn",children:Object(n.jsx)(v.a,{variant:"outlined",component:"span",children:"Choose profile image"})})]}),Object(n.jsx)(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"firstname",label:"Firstname",name:"firstname",autoComplete:"firstname",value:l,onChange:function(e){u(e.target.value)}}),Object(n.jsx)(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"lastname",label:"Lastname",name:"lastname",autoComplete:"lastname",value:m,onChange:function(e){b(e.target.value)}}),Object(n.jsx)(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",autoComplete:"email",value:S,onChange:function(e){C(e.target.value)}})]}),Object(n.jsxs)(y.a,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginBottom:"1rem",children:[Object(n.jsx)(v.a,{color:"secondary",variant:"outlined",onClick:function(){var e=[{propName:"firstName",value:l},{propName:"lastName",value:m},{propName:"email",value:S}];fetch(X+"/uinfo/"+Y,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+V},body:JSON.stringify(e)}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("failed!")})).then((function(){L("success"),_("Updates Saved!"),F(!0)})).catch((function(e){console.log(e),L("error"),_("Update failed!"),F(!0)}));var t=new FormData;t.append("avatarImg",I),fetch(X+"/avatarup/"+Y,{method:"PATCH",headers:{Authorization:"Bearer "+V},body:t}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("failed!")})).catch((function(e){console.log(e)}))},children:"save profile"}),Object(n.jsx)(v.a,{style:{marginLeft:"0.5rem"},color:"default",variant:"outlined",onClick:Q,children:"Logout"})]})]})]})]})},fe=Object(h.a)({root:{flexGrow:1},tab:{maxWidth:"25%",minWidth:0},tabRoot:{minWidth:0,marginBottom:"1rem"}});function Oe(){var e=fe(),t=r.a.useState(0),a=Object(d.a)(t,2),o=a[0],c=a[1],i=[Object(n.jsx)(ce,{}),Object(n.jsx)(ue,{}),Object(n.jsx)(he,{}),Object(n.jsx)(be,{})];return Object(n.jsx)(f.a,{maxWidth:"sm",children:Object(n.jsxs)(F.a,{elevation:0,className:e.root,style:{paddingBottom:"0.1rem",marginBottom:"1.5rem"},children:[Object(n.jsxs)(q.a,{className:e.tabRoot,value:o,onChange:function(e,t){c(t)},variant:"fullWidth",indicatorColor:"secondary",textColor:"secondary","aria-label":"icon label tabs example",children:[Object(n.jsx)(D.a,{className:e.tab,icon:Object(n.jsx)(z.a,{}),label:"Home"}),Object(n.jsx)(D.a,{className:e.tab,icon:Object(n.jsx)(L.a,{}),label:"Search"}),Object(n.jsx)(D.a,{className:e.tab,icon:Object(n.jsx)(U.a,{}),label:"Profile"}),Object(n.jsx)(D.a,{className:e.tab,icon:Object(n.jsx)(R.a,{}),label:"Settings"})]}),i[o]]})})}var pe=Object(j.a)({palette:{type:"dark"}}),xe=function(){var e=Object(o.useContext)(k).token;return Object(n.jsxs)(u.a,{theme:pe,children:[Object(n.jsx)(p.a,{}),Object(n.jsx)(s.a,{basename:"/FaceAct",children:Object(n.jsxs)(l.d,{children:[!e&&Object(n.jsx)(l.a,{from:"/",to:"/signin",exact:!0}),!e&&Object(n.jsx)(l.a,{from:"/home",to:"/signin",exact:!0}),e&&Object(n.jsx)(l.a,{from:"/signin",to:"/home",exact:!0}),e&&Object(n.jsx)(l.a,{from:"/",to:"/home",exact:!0}),!e&&Object(n.jsx)(l.b,{path:"/signin",component:B}),!e&&Object(n.jsx)(l.b,{path:"/signup",component:A}),e&&Object(n.jsx)(l.b,{path:"/home",component:Oe}),Object(n.jsx)(l.b,{path:"/:username",component:he})]})})]})};i.a.render(Object(n.jsx)(T,{children:Object(n.jsx)(xe,{})}),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.4ba85e70.chunk.js.map